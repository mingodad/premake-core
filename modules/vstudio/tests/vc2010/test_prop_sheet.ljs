//
// tests/actions/vstudio/vc2010/test_prop_sheet.ljs
// Validate generation of the property sheet import groups.
// Copyright (c) 2011-2012 Jason Perkins and the Premake project
//

	var p = premake;
	var suite = test.declare("vstudio_vs2010_prop_sheet");
	var vc2010 = p.vstudio.vc2010;
	var project = p.project;


//
// Setup
//

	var wks, prj;

	function suite.setup() {
		p.action.set("vs2010");
		wks, prj = test.createWorkspace();
	}

	var function prepare() {
		var cfg = test.getconfig(prj, "Debug");
		vc2010.propertySheets(cfg);
	}


//
// Check the structure with the default project values.
//

	function suite.structureIsCorrect_onDefaultValues() {
		prepare();
		test.capture ([=[
<ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
	<Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
</ImportGroup>
		]=]);
	}
