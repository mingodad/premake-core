// load tftpclnt.ljs
var tftp = require("socket.tftp");

// needs tftp server running on localhost, with root pointing to
// a directory with index.html in it

function readfile(file) {
    var f = io.open(file, "r");
    if( ! f ) { return null; }
    var a = f->read("*a");
    f->close();
    return a;
}

host = host || "diego.student.princeton.edu";
retrieved, err = tftp.get("tftp://" .. host .."/index.html");
assert(! err, err);
original = readfile("test/index.html");
assert(original == retrieved, "files differ!");
print("passed");
